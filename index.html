<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autômato de uma pilha</title>
    <link rel="stylesheet" href="style.css">
    <script src="index.js" defer></script>
</head>

<body>
    <div class="main-container">
        <aside class="left-panel">
            <h2>Configurações</h2>
            <form id="pda-form">
                <div class="form-group">
                    <label for="entries">Fita de Entrada:</label>
                    <input class="input-dark" type="text" id="entries" name="entries" placeholder="a, b, ...">
                    <span id="entries-preview" class="mini-preview"></span> 
                </div>

                <div class="form-group">
                    <label for="states">Estados:</label>
                    <input class="input-dark" type="text" id="states" name="states" placeholder="q0, q1, q2...">
                    <span id="states-preview" class="mini-preview"></span>
                </div>

                <div class="row-group">
                    <div class="form-group half">
                        <label for="first-state">Estado Inicial:</label>
                        <input class="input-dark" type="text" id="first-state" name="first-state" placeholder="q0">
                    </div>
                    <div class="form-group half">
                        <label for="final-states">Estado(s) Final(is):</label>
                        <input class="input-dark" type="text" id="final-states" name="final-states" placeholder="qF">
                    </div>
                </div>

                <div class="form-group">
                    <label for="stack-alphabet">Alfabeto da Pilha:</label>
                    <input class="input-dark" type="text" id="stack-alphabet" name="alphabet" placeholder="Z, A...">
                    <span id="stack-alphabet-preview" class="mini-preview"></span>
                </div>

                <button type="submit" class="btn-primary full-width">▶ Iniciar Computação</button>
            </form>
        </aside>

        <main class="right-panel">
            <div class="visual-header">
                <h2>Visualização</h2>
            </div>

            <div class="tape-container-wrapper">
                <label>Fita (entrada):</label>
                <div id="tape-visual-container">
                    </div>
            </div>

            <div class="graph-stack-wrapper">
                <div class="graph-area">
                    <div id="pda-graph" class="mermaid"></div>
                </div>

                <div id="step-controls" class="controls-area" style="display: none;">
                    <div class="stack-section">
                        <label>Pilha:</label>
                        <div id="stack-visual-container"></div>
                        <div class="stack-text-value" id="current-stack-display">[]</div>
                    </div>
                    
                    <div class="step-actions">
                        <div class="info-box">
                            <small>Estado Atual:</small>
                            <strong id="current-state-display" class="highlight-text">-</strong>
                        </div>
                        <div class="info-box message-box">
                            <p id="step-message">Pronto para iniciar.</p>
                        </div>
                        <button type="button" id="btn-next-step" class="btn-accent">Próximo Passo ➔</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <section class="bottom-section">
        <div class="bottom-header">
            <h3>Tabela de Transições         (ε)</h3>
            <button type="button" id="btn-add-transitions" class="btn-secondary">+ Nova Transição</button>
        </div>
        
        <div id="transition-table" class="transitions-grid">
            </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: false, 
            theme: 'dark', 
            securityLevel: 'loose'
        });
    </script>
    <script src="index.js" defer></script>
</body>